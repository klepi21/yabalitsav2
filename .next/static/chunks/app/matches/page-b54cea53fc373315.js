(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{8203:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9300:function(e,t,n){Promise.resolve().then(n.bind(n,9195))},9195:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7437),s=n(2265),i=n(3082),l=n(2936),r=n(3023),c=n(8203),o=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var u=n(4033);function m(){let e=(0,i.createClientComponentClient)(),t=async()=>{await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}})};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 backdrop-blur-sm bg-background/80 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-sm mx-auto p-6 text-center space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Καλώς ήρθατε στο Yabalitsa"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Συνδεθείτε για να δείτε όλες τις λεπτομέρειες και να συμμετάσχετε σε αγώνες"}),(0,a.jsx)(r.z,{onClick:t,size:"lg",className:"w-full",children:"Σύνδεση με Google"})]})})}function h(e){let{children:t}=e,[n,l]=(0,s.useState)(null),[r,c]=(0,s.useState)(!0),o=(0,i.createClientComponentClient)();return((0,s.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await o.auth.getUser();l(e),c(!1)};e();let{data:{subscription:t}}=o.auth.onAuthStateChange((e,t)=>{var n;l(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null)});return()=>t.unsubscribe()},[]),r)?null:(0,a.jsxs)("div",{className:"relative",children:[t,!n&&(0,a.jsx)(m,{})]})}function f(){let[e,t]=(0,s.useState)([]),[n,o]=(0,s.useState)(!0),[m,f]=(0,s.useState)(null),p=(0,i.createClientComponentClient)(),x=(0,u.useRouter)();(0,s.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await p.auth.getUser();f(e)};e()},[]),(0,s.useEffect)(()=>{let e=async()=>{let{data:e,error:n}=await p.from("matches").select("\n          *,\n          venue:venues(*),\n          host:profiles!matches_host_id_fkey(*),\n          participants:match_participants(\n            player:profiles(*)\n          )\n        ").order("match_date",{ascending:!0});if(n){console.error("Error fetching matches:",n);return}t(e||[]),o(!1)};e()},[]);let g=e=>{var t;let[n,...a]=e.split(" ");return"".concat(n," ").concat(null===(t=a[0])||void 0===t?void 0:t[0],".")},v=async e=>{try{let{error:t}=await p.from("match_participants").insert({match_id:e,player_id:m.id});if(t)throw t;x.refresh()}catch(e){console.error("Error joining match:",e)}};if(n)return(0,a.jsx)("div",{className:"p-4",children:"Loading..."});let j=e.filter(e=>{let t=new Date(e.match_date),n=new Date;return t.toDateString()===n.toDateString()}),y=e.filter(e=>{let t=new Date(e.match_date),n=new Date;return t>n&&t.toDateString()!==n.toDateString()});return(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"container py-6 space-y-8",children:[(0,a.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"rounded-full",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Σήμερα"]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"rounded-full ml-auto",children:[(0,a.jsx)(d,{className:"h-4 w-4 mr-2"}),"Φίλτρα"]})]}),j.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Σημερινοί Αγώνες"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j.map(e=>(0,a.jsx)(l.m,{match:e,isJoined:e.participants.some(e=>e.player.id===(null==m?void 0:m.id)),onJoin:()=>v(e.id),formatName:g},e.id))})]}),y.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Προσεχείς Αγώνες"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(e=>(0,a.jsx)(l.m,{match:e,isJoined:e.participants.some(e=>e.player.id===(null==m?void 0:m.id)),onJoin:()=>v(e.id),formatName:g},e.id))})]}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Δεν υπάρχουν διαθέσιμοι αγώνες"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Δοκιμάστε να αλλάξετε τα φίλτρα αναζήτησης"})]})]})})}}},function(e){e.O(0,[952,157,936,971,864,744],function(){return e(e.s=9300)}),_N_E=e.O()}]);