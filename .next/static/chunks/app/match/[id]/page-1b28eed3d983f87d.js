(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{586:function(e,t,a){Promise.resolve().then(a.bind(a,8365))},8365:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var s=a(7437),r=a(2265),i=a(9314),n=a(3082),l=a(5750),o=a(6141),c=a(3733),d=a(6142),u=a(2176),m=a(2741),h=a(9224),p=a(3523),f=a(6224),x=a(9764),g=a(9581),v=a(6110),j=a(9155),y=a(3023),b=a(7309),N=a(2621),w=a(2069),_=a(3775),C=a(1908),k=a(4033),S=a(5340);function E(e){let{matchId:t,playerId:a,playerName:i,existingRating:l,onRated:o}=e,[c,d]=(0,r.useState)(l||0),[u,m]=(0,r.useState)(0),[h,p]=(0,r.useState)(!1),f=(0,n.createClientComponentClient)(),{toast:x}=(0,N.pm)(),g=async()=>{try{p(!0);let{data:{user:e}}=await f.auth.getUser();if(!e)return;let{error:s}=await f.from("match_ratings").upsert({match_id:t,rated_player_id:a,rater_id:e.id,rating:c});if(s)throw s;x({title:"Success",description:"Rating submitted successfully"}),null==o||o()}catch(e){console.error("Error submitting rating:",e),x({title:"Error",description:"Failed to submit rating",variant:"destructive"})}finally{p(!1)}};return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:i}),(0,s.jsx)("div",{className:"flex gap-1 mt-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{className:"focus:outline-none",onMouseEnter:()=>m(e),onMouseLeave:()=>m(0),onClick:()=>d(e),children:(0,s.jsx)(S.Z,{className:"h-6 w-6 ".concat(e<=(u||c)?"fill-primary text-primary":"text-muted-foreground")})},e))})]}),(0,s.jsx)(y.z,{size:"sm",disabled:!c||h,onClick:g,children:h?"Submitting...":"Submit"})]})}var R=a(9126);function M(e){let{className:t=""}=e;return(0,s.jsx)("div",{className:"relative w-full h-48 bg-gradient-to-b from-primary/20 to-background overflow-hidden ".concat(t),children:(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full opacity-[0.15]",viewBox:"0 0 800 400",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"20",y:"20",width:"760",height:"360",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"400",cy:"200",r:"70",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("line",{x1:"400",y1:"20",x2:"400",y2:"380",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"20",y:"120",width:"100",height:"160",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"20",y:"160",width:"50",height:"80",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"120",cy:"200",r:"2",fill:"currentColor"}),(0,s.jsx)("rect",{x:"680",y:"120",width:"100",height:"160",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"730",y:"160",width:"50",height:"80",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"680",cy:"200",r:"2",fill:"currentColor"}),(0,s.jsx)("path",{d:"M20,40 A20,20 0 0,1 40,20",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M760,40 A20,20 0 0,0 780,20",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M20,360 A20,20 0 0,0 40,380",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M760,360 A20,20 0 0,1 780,380",stroke:"currentColor",fill:"none",strokeWidth:"2"})]})})}var z=a(9853),T=a(9957);let A=(e,t)=>(0,i.ZP)(e,t,{locale:T.el});var P=a(6020);function Z(e){let{matchId:t,isParticipant:a}=e,[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),p=(0,n.createClientComponentClient)(),f=()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},x=async()=>{let{data:e,error:a}=await p.from("match_chat").select("\n        id,\n        message,\n        created_at,\n        sender:profiles!match_chat_sender_id_fkey (\n          full_name,\n          avatar_url\n        )\n      ").eq("match_id",t).order("created_at",{ascending:!0});if(a){console.error("Error fetching messages:",a);return}e&&(console.log("Messages loaded:",e),o(e))};(0,r.useEffect)(()=>{f()},[l]),(0,r.useEffect)(()=>{if(!a)return;let e=async()=>{await p.removeAllChannels();let e=p.channel("match_chat:".concat(t)).on("postgres_changes",{event:"INSERT",schema:"public",table:"match_chat",filter:"match_id=eq.".concat(t)},async e=>{console.log("Received real-time update:",e),await x()}).subscribe(e=>{console.log("Chat channel status:",e)});return await x(),()=>{console.log("Cleaning up subscription"),e.unsubscribe()}};e()},[t,a]);let g=async e=>{if(e.preventDefault(),c.trim()&&!u){m(!0);try{var a;let{data:e}=await p.auth.getUser(),{error:s}=await p.from("match_chat").insert({match_id:t,message:c.trim(),sender_id:null===(a=e.user)||void 0===a?void 0:a.id});if(s)throw s;console.log("Message sent successfully"),d(""),await x()}catch(e){console.error("Error sending message:",e)}finally{m(!1)}}};return a?(0,s.jsxs)("div",{className:"flex flex-col h-[600px] bg-background",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)("h2",{className:"font-semibold",children:"Match Chat"})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsxs)(b.qE,{className:"h-8 w-8",children:[(0,s.jsx)(b.F$,{src:e.sender.avatar_url}),(0,s.jsx)(b.Q5,{children:e.sender.full_name[0]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsxs)("span",{className:"font-medium text-sm",children:[e.sender.full_name.split(" ")[0]," ",null===(t=e.sender.full_name.split(" ")[1])||void 0===t?void 0:t[0],"."]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,i.ZP)(new Date(e.created_at),"HH:mm")})]}),(0,s.jsx)("p",{className:"text-sm",children:e.message})]})]},e.id)}),(0,s.jsx)("div",{ref:h})]}),(0,s.jsx)("form",{onSubmit:g,className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.I,{value:c,onChange:e=>d(e.target.value),placeholder:"Type a message...",disabled:u}),(0,s.jsx)(y.z,{type:"submit",size:"icon",disabled:u,children:(0,s.jsx)(P.Z,{className:"h-4 w-4"})})]})})]}):null}var I=a(8712),F=a(2549),D=a(9311);let O=I.fC,W=I.xz,q=I.h_;I.x8;let Y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.aV,{ref:t,className:(0,D.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});Y.displayName=I.aV.displayName;let L=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(q,{children:[(0,s.jsx)(Y,{}),(0,s.jsxs)(I.VY,{ref:t,className:(0,D.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(I.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(F.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});L.displayName=I.VY.displayName;let V=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.Dx,{ref:t,className:(0,D.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});V.displayName=I.Dx.displayName;let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.dk,{ref:t,className:(0,D.cn)("text-sm text-muted-foreground",a),...r})});function H(e){var t;let{params:a}=e,[S,T]=(0,r.useState)(null),[P,I]=(0,r.useState)(!0),[F,D]=(0,r.useState)(!1),[q,Y]=(0,r.useState)(!1),[V,U]=(0,r.useState)(""),[H,G]=(0,r.useState)(!1),[B,Q]=(0,r.useState)(!1),$=(0,n.createClientComponentClient)(),{toast:J}=(0,N.pm)(),X=(0,k.useRouter)(),[K,ee]=(0,r.useState)(null),[et,ea]=(0,r.useState)({}),{t:es}=(0,z.useLanguage)(),[er,ei]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await $.auth.getUser();ee(e)};e()},[]);let en=async()=>{try{let{data:e,error:t}=await $.from("matches").select("\n          *,\n          venue:venues(*),\n          host:profiles!matches_host_id_fkey(*),\n          participants:match_participants(\n            player:profiles(*)\n          ),\n          match_ratings(*)\n        ").eq("id",a.id).single();if(t)throw t;if(T(e),K){Y(e.host_id===K.id),D(e.participants.some(e=>e.player.id===K.id));let t=e.participants.map(e=>e.player.id),{data:a}=await $.from("match_ratings").select("rating, rated_player_id").in("rated_player_id",t),s={};null==a||a.forEach(e=>{s[e.rated_player_id]||(s[e.rated_player_id]=[]),s[e.rated_player_id].push(e.rating)});let r={};Object.entries(s).forEach(e=>{let[t,a]=e,s=a.reduce((e,t)=>e+t,0)/a.length;r[t]=Number(s.toFixed(1))}),ea(r)}}catch(e){console.error("Error fetching match:",e)}finally{I(!1)}};(0,r.useEffect)(()=>{en()},[a.id,K]);let el=async()=>{try{let{data:{user:e}}=await $.auth.getUser();if(!e)return;let t=new Date(S.match_date),s=(0,w.Z)(t,-8),r=new Date;if(!(0,_.Z)(r,s)){J({title:"Cannot Cancel",description:"Cancellations are only allowed up to 8 hours before the match",variant:"destructive"});return}let{error:i}=await $.from("match_participants").delete().match({match_id:S.id,player_id:e.id});if(i)throw i;D(!1),J({title:"Success",description:"You've cancelled your participation"});let{data:n,error:l}=await $.from("matches").select("\n          *,\n          venue:venues(*),\n          host:profiles!matches_host_id_fkey(*),\n          participants:match_participants(\n            player:profiles(\n              id,\n              full_name,\n              phone_number,\n              phone_public,\n              avatar_url\n            )\n          )\n        ").eq("id",a.id).single();if(l)throw l;T(n)}catch(e){console.error("Error cancelling participation:",e),J({title:"Error",description:"Failed to cancel participation",variant:"destructive"})}},eo=async()=>{try{if(S.private_code!==V){J({title:"Invalid Code",description:"The code you entered is incorrect",variant:"destructive"});return}let{data:{user:e}}=await $.auth.getUser();if(!e)return;let{error:t}=await $.from("match_participants").insert({match_id:S.id,player_id:e.id});if(t)throw t;D(!0),G(!1),J({title:"Success",description:"You've joined the match!"})}catch(e){console.error("Error joining match:",e),J({title:"Error",description:"Failed to join match",variant:"destructive"})}},ec=async()=>{try{let e=window.confirm("Are you sure you want to delete this match? This action cannot be undone.");if(!e)return;let{error:t}=await $.from("match_participants").delete().eq("match_id",S.id);if(t)throw t;let{error:a}=await $.from("matches").delete().eq("id",S.id);if(a)throw a;J({title:"Success",description:"Match has been deleted"}),X.push("/")}catch(e){console.error("Error deleting match:",e),J({title:"Error",description:"Failed to delete match",variant:"destructive"})}},ed=async()=>{try{let e=window.confirm("Are you sure you want to mark this match as finished?");if(!e)return;let{error:t}=await $.from("matches").update({status:"finished"}).eq("id",S.id);if(t)throw t;J({title:"Success",description:"Match has been marked as finished"}),await en()}catch(e){console.error("Error finishing match:",e),J({title:"Error",description:"Failed to finish match",variant:"destructive"})}},eu=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy text: ",e),!1}},em=async()=>{try{let{data:{user:e}}=await $.auth.getUser();if(!e)return;let{error:t}=await $.from("match_participants").insert({match_id:S.id,player_id:e.id});if(t)throw t;J({title:"Success",description:"You've joined the match!"}),en()}catch(e){console.error("Error joining match:",e),J({title:"Error",description:"Failed to join match",variant:"destructive"})}},eh=async()=>{await $.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/match/").concat(a.id),skipBrowserRedirect:!1}})};if(P&&null!==K)return(0,s.jsx)("div",{className:"p-4",children:"Loading..."});if(!S)return(0,s.jsx)("div",{className:"p-4",children:"Match not found"});let ep=new Date(S.match_date),ef=A(ep,"EEEE d MMM"),ex=(0,i.ZP)(ep,"HH:mm"),eg=(null===(t=S.participants)||void 0===t?void 0:t.length)||0,ev=(0,w.Z)(ep,-8),ej=(0,_.Z)(new Date,ev),ey=e=>{var t;let[a,...s]=e.split(" ");return"".concat(a," ").concat(null===(t=s[0])||void 0===t?void 0:t[0],".")};return(0,s.jsx)("div",{className:"p-4 space-y-6 relative",children:(0,s.jsxs)(v.Zb,{className:"border-none shadow-none relative",children:[(0,s.jsx)(M,{className:"rounded-t-lg"}),!K&&(0,s.jsx)("div",{className:"absolute inset-0 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-4 bg-background/30",children:(0,s.jsxs)("div",{className:"text-center space-y-4 p-6 rounded-lg bg-background/95 backdrop-blur shadow-lg max-w-md mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Καλώς ήρθατε στο Yabalitsa!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Συνδεθείτε για να δείτε όλες τις λεπτομέρειες του αγώνα και να συμμετέχετε."}),(0,s.jsx)(y.z,{size:"lg",className:"w-full",onClick:eh,children:"Σύνδεση με Google"})]})}),(0,s.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between pb-2 px-4 -mt-8 relative z-10",children:[(0,s.jsxs)("div",{className:"bg-background p-4 rounded-lg shadow-lg",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:S.venue.name}),(0,s.jsxs)("p",{className:"text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),es("matches.host")," ",ey(S.host.full_name)]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2 bg-background p-4 rounded-lg shadow-lg",children:[S.is_private&&(0,s.jsx)(j.C,{variant:"secondary",children:es("matches.private")}),(0,s.jsx)(j.C,{variant:"outline",children:es("matches.status.".concat(S.status))})]})]}),(0,s.jsxs)(v.aY,{className:"space-y-8 px-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:es("matches.date")}),(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),ef]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:es("matches.time")}),(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),ex]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:es("matches.details.costPerPlayer")}),(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(g.R,{className:"h-4 w-4"}),"€",S.cost_per_player]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:es("matches.players")}),(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),eg," / ",S.max_players]})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"* Κάθε παίκτης πρέπει να πληρώσει το κόστος συμμετοχής του στη γραμματεία του γηπέδου πριν ή μετά τον αγώνα"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:es("matches.details.location")}),(0,s.jsx)(y.z,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary",onClick:()=>window.open("https://maps.google.com/?q=".concat(S.venue.address),"_blank"),children:(0,s.jsx)(c.Z,{className:"h-5 w-5"})})]}),(0,s.jsx)("div",{className:"p-4 rounded-lg border",children:(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),S.venue.address]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:es("matches.players")}),"finished"!==S.status&&(F||q)&&(0,s.jsxs)(O,{children:[(0,s.jsx)(W,{asChild:!0,children:(0,s.jsxs)(y.z,{variant:"outline",className:"gap-2",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),"Match Chat"]})}),(0,s.jsx)(L,{className:"sm:max-w-[500px] p-0",children:(0,s.jsx)(Z,{matchId:S.id,isParticipant:F||q})})]})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[S.participants.slice(0,er?void 0:5).map(e=>{let t=e.player.speed&&e.player.pace&&e.player.power?((e.player.speed+e.player.pace+e.player.power)/3).toFixed(1):null,a=et[e.player.id];return(0,s.jsx)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(b.qE,{className:"h-10 w-10",children:[(0,s.jsx)(b.F$,{src:e.player.avatar_url}),(0,s.jsx)(b.Q5,{children:e.player.full_name[0]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:ey(e.player.full_name)}),e.player.id===S.host_id&&(0,s.jsx)(j.C,{variant:"outline",children:"Host"})]}),(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[t&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Self:"}),(0,s.jsx)(j.C,{variant:"secondary",className:"text-xs",children:t})]}),a&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Community:"}),(0,s.jsx)(R.Z,{rating:a,size:"sm",showValue:!1})]})]}),(q||F)&&e.player.phone_public&&e.player.phone_number&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(m.Z,{className:"h-3 w-3"}),e.player.phone_number]})]})]})},e.player.id)}),S.participants.length>5&&(0,s.jsx)(y.z,{variant:"outline",onClick:()=>ei(!er),className:"w-full",children:er?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Show All Players (",S.participants.length,")"]})})]})]}),!q&&"finished"!==S.status&&(0,s.jsxs)(s.Fragment,{children:[!F&&eg<S.max_players&&(0,s.jsx)(s.Fragment,{children:S.is_private&&!H?(0,s.jsx)(y.z,{className:"w-full",onClick:()=>G(!0),children:es("matches.details.joinPrivate")}):S.is_private&&H?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.I,{type:"text",placeholder:es("matches.details.enterCode"),maxLength:6,value:V,onChange:e=>U(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(y.z,{className:"flex-1",onClick:eo,children:es("matches.details.submitCode")}),(0,s.jsx)(y.z,{variant:"outline",onClick:()=>{G(!1),U("")},children:"Cancel"})]})]}):(0,s.jsx)(y.z,{className:"w-full",onClick:em,children:"Συμμετοχή"})}),F&&(0,s.jsx)(y.z,{variant:"destructive",className:"w-full",onClick:el,disabled:!ej,children:es(ej?"matches.details.cancelParticipation":"matches.details.cannotCancel")})]}),q&&"finished"!==S.status&&eg/S.max_players<.9&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,s.jsx)(y.z,{variant:"destructive",className:"w-full",onClick:ec,children:es("matches.details.deleteMatch")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:es("matches.details.deleteWarning")})]}),q&&"upcoming"===S.status&&(0,s.jsx)(y.z,{className:"w-full mt-4",onClick:ed,children:es("matches.details.markAsFinished")}),"finished"===S.status&&K&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Rate Players"}),(0,s.jsx)(y.z,{variant:"outline",onClick:()=>Q(!B),children:B?"Hide Ratings":"Show Ratings"})]}),B&&(0,s.jsx)("div",{className:"space-y-3",children:S.participants.filter(e=>e.player.id!==K.id).map(e=>{var t,a;let r=null===(a=S.match_ratings)||void 0===a?void 0:null===(t=a.find(t=>t.rater_id===K.id&&t.rated_player_id===e.player.id))||void 0===t?void 0:t.rating;return(0,s.jsx)(E,{matchId:S.id,playerId:e.player.id,playerName:e.player.full_name,existingRating:r,onRated:en},e.player.id)})})]}),q&&S.is_private&&"finished"!==S.status&&(0,s.jsxs)("div",{className:"mt-2 p-4 bg-muted rounded-lg space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:es("matches.details.privateCode")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(y.z,{size:"sm",variant:"outline",className:"h-8",onClick:async()=>{let e=await eu(S.private_code);e&&J({title:"Copied!",description:"Match code copied to clipboard"})},children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),es("matches.details.copyCode")]}),(0,s.jsxs)(y.z,{size:"sm",variant:"outline",className:"h-8",onClick:()=>{navigator.share?navigator.share({title:"Join my football match!",text:"Join my match at ".concat(S.venue.name,"! Use code: ").concat(S.private_code),url:window.location.href}).catch(e=>{console.error("Error sharing:",e)}):J({title:"Sharing not supported",description:"Your browser doesn't support sharing",variant:"destructive"})},children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),es("matches.details.share")]})]})]}),(0,s.jsx)("p",{className:"text-lg font-mono tracking-wider text-center bg-background rounded p-2",children:S.private_code})]})]})]})})}U.displayName=I.dk.displayName},9581:function(e,t,a){"use strict";a.d(t,{R:function(){return r}});var s=a(7437);function r(e){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,s.jsx)("path",{d:"M4 10h12"}),(0,s.jsx)("path",{d:"M4 14h9"}),(0,s.jsx)("path",{d:"M19 6c-2.3 0-4.3 1.4-5.1 3.4"}),(0,s.jsx)("path",{d:"M15 18c-1.4 0-2.6-.6-3.4-1.6"}),(0,s.jsx)("path",{d:"M14 6.3c.9-.3 1.9-.5 3-.5"}),(0,s.jsx)("path",{d:"M17 18c.7 0 1.4-.1 2-.3"}),(0,s.jsx)("path",{d:"M18 18a8 8 0 0 0 0-12"})]})}},7309:function(e,t,a){"use strict";a.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return l}});var s=a(7437),r=a(2265),i=a(6694),n=a(9311);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});l.displayName=i.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});o.displayName=i.Ee.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=i.NY.displayName},9155:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var s=a(7437);a(2265);var r=a(9213),i=a(9311);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)(n({variant:a}),t),...r})}},3023:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return c}});var s=a(7437),r=a(2265),i=a(7256),n=a(9213),l=a(9311);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:n,className:a})),ref:t,...d})});c.displayName="Button"},6110:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var s=a(7437),r=a(2265),i=a(9311);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},1908:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var s=a(7437),r=a(2265),i=a(9311);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},9126:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(7437),r=a(5340);function i(e){let{rating:t,showValue:a=!0,size:i="md"}=e,n={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(e=>(0,s.jsx)(r.Z,{className:"".concat(n[i]," ").concat(e<=t?"fill-primary text-primary":"text-muted-foreground")},e)),a&&(0,s.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",t,")"]})]})}},2621:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9853:function(e,t,a){"use strict";a.r(t),a.d(t,{LanguageProvider:function(){return l},useLanguage:function(){return o}});var s=a(7437),r=a(2265);let i={gr:{common:{loading:"Φόρτωση...",success:"Επιτυχία",error:"Σφάλμα"},nav:{home:"Αρχική",history:"Ιστορικό",create:"Δημιουργία",profile:"Προφίλ",logout:"Αποσύνδεση"},matches:{title:"Διαθέσιμοι Αγώνες",subtitle:"Βρείτε και συμμετέχετε σε παιχνίδια κοντά σας",join:"Συμμετοχή",players:"Παίκτες",location:"Τοποθεσία",date:"Ημερομηνία",time:"Ώρα",host:"Διοργανωτής",private:"Ιδιωτικό",full:"Πλήρες",status:{upcoming:"Επερχόμενος",in_progress:"Σε Εξέλιξη",finished:"Ολοκληρώθηκε",cancelled:"Ακυρώθηκε"},details:{location:"Τοποθεσία",openInMaps:"Άνοιγμα στους Χάρτες",costPerPlayer:"Κόστος ανά Παίκτη",joinMatch:"Συμμετοχή στον Αγώνα",joinPrivate:"Συμμετοχή σε Ιδιωτικό Αγώνα",enterCode:"Εισάγετε 6-ψήφιο κωδικό",submitCode:"Υποβολή Κωδικού",cancelParticipation:"Ακύρωση Συμμετοχής",cannotCancel:"Δεν μπορείτε να ακυρώσετε (< 8ω πριν τον αγώνα)",deleteMatch:"Διαγραφή Αγώνα",deleteWarning:"Μπορείτε να διαγράψετε αυτόν τον αγώνα επειδή είναι λιγότερο από 90% γεμάτος",markAsFinished:"Ολοκλήρωση Αγώνα",privateCode:"Κωδικός Ιδιωτικού Αγώνα",copyCode:"Αντιγραφή",share:"Κοινοποίηση",codeCopied:"Ο κωδικός αντιγράφηκε",shareNotSupported:"Η κοινοποίηση δεν υποστηρίζεται",shareTitle:"Έλα στον αγώνα μου!",shareText:"Έλα στον αγώνα μου στο {venue}! Κωδικός: {code}"}},footer:{joinCommunity:"Γίνετε μέλος της κοινότητας και ξεκινήστε να παίζετε σήμερα"},profile:{title:"Προφίλ",fullName:"Ονοματεπώνυμο",notSet:"Δεν έχει οριστεί",username:"Όνομα χρήστη",phoneNumber:{label:"Αριθμός Τηλεφώνου",placeholder:"Εισάγετε αριθμό τηλεφώνου"},sharePhone:"Κοινοποίηση Τηλεφώνου",sharePhoneDesc:"Επιτρέψτε στους διοργανωτές να βλέπουν το τηλέφωνό σας",playerRatings:"Αξιολογήσεις Παίκτη",speed:"Ταχύτητα",pace:"Ρυθμός",power:"Δύναμη",selfRating:"Προσωπική Αξιολόγηση",communityRating:"Αξιολόγηση Κοινότητας",basedOnFeedback:"Βάσει σχολίων κοινότητας",noRatingsYet:"Δεν υπάρχουν ακόμη αξιολογήσεις",updateProfile:"Ενημέρωση Προφίλ",changePhoto:"Αλλαγή Φωτογραφίας",uploadSuccess:"Η φωτογραφία προφίλ ενημερώθηκε",uploadError:"Αποτυχία μεταφόρτωσης φωτογράφιας",updateSuccess:"Το προφίλ ενημερώθηκε με επιτυχία",updateError:"Αποτυχία ενημέρωσης προφίλ",usernameTaken:"Το όνομα χρήστη χρησιμοποιείται ήδη",ratings:{speed:{label:"Ταχύτητα",value:"Ταχύτητα: {value}"},pace:{label:"Αντοχή",value:"Αντοχή: {value}"},power:{label:"Δύναμη",value:"Δύναμη: {value}"}}},history:{title:"Ιστορικό Αγώνων",subtitle:"Δείτε τους προηγούμενους αγώνες σας",noMatches:"Δεν υπάρχουν αγώνες στο ιστορικό",tabs:{upcoming:"Επερχόμενοι",finished:"Ολοκληρωμένοι"},rateMatch:"Αξιολόγηση Αγώνα",ratePlayer:"Αξιολόγηση Παίκτη",hideRatings:"Απόκρυψη Αξιολογήσεων",showRatings:"Εμφάνιση Αξιολογήσεων",ratings:{title:"Αξιολογήσεις",submitRating:"Υποβολή",submitting:"Υποβολή...",success:"Η αξιολόγηση καταχωρήθηκε",error:"Σφάλμα κατά την αξιολόγηση"}},create:{title:"Δημιουργία Νέου Αγώνα",venue:{label:"Γήπεδο",placeholder:"Επιλέξτε γήπεδο"},date:{label:"Ημερομηνία",placeholder:"Επιλέξτε ημερομηνία"},time:{label:"Ώρα",placeholder:"Επιλέξτε ώρα"},players:{label:"Αριθμός Παικτών",suffix:"παίκτες"},cost:{label:"Κόστος ανά Παίκτη (€)",placeholder:"Εισάγετε κόστος"},privateMatch:{label:"Ιδιωτικός Αγώνας",description:"Μόνο παίκτες με κωδικό μπορούν να συμμετάσχουν"},venueConfirmation:{label:"Επιβεβαίωση Κράτησης",description:"Επιβεβαιώνω ότι έχω ήδη επικοινωνήσει και κάνει κράτηση του γηπέδου. Κατανοώ ότι η δημιουργία αγώνων χωρίς προηγούμενη κράτηση γηπέδου μπορεί να οδηγήσει σε αποκλεισμό από την πλατφόρμα."},submit:{creating:"Δημιουργία...",create:"Δημιουργία Αγώνα"},errors:{venueRequired:"Παρακαλώ επιλέξτε γήπεδο",dateRequired:"Παρακαλώ επιλέξτε ημερομηνία",dateInPast:"Η ημερομηνία δεν μπορεί να είναι στο παρελθόν",timeInvalid:"Παρακαλώ επιλέξτε έγκυρη ώρα (10:00-23:00, κάθε 30 λεπτά)",playersRange:"Ο αριθμός παικτών πρέπει να είναι μεταξύ 10 και 16",costNegative:"Το κόστος δεν μπορεί να είναι αρνητικό",venueConfirmRequired:"Πρέπει να επιβεβαιώσετε την κράτηση του γηπέδου"}},auth:{loginTitle:"Βρείτε και Συμμετέχετε σε Αγώνες Ποδοσφαίρου",loginSubtitle:"Στην Περιοχή σας",loginDescription:"Συνδεθείτε με παίκτες, οργανώστε παιχνίδια και μην χάσετε κανέναν αγώνα",connectWithGoogle:"Σύνδεση με Google",features:{findMatches:{title:"Βρείτε Τοπικούς Αγώνες",description:"Ανακαλύψτε παιχνίδια κοντά σας"},joinTeams:{title:"Συμμετοχή σε Ομάδες",description:"Συνδεθείτε με άλλους παίκτες και συμμετέχετε άμεσα"},organizeGames:{title:"Οργανώστε Παιχνίδια",description:"Δημιουργήστε και διαχειριστείτε τους αγώνες σας"},ratePlayers:{title:"Αξιολογήστε Παίκτες",description:"Χτίστε τη φήμη σας στην κοινότητα"}}}}},n=(0,r.createContext)(void 0);function l(e){let{children:t}=e;return(0,s.jsx)(n.Provider,{value:{t:e=>{let t=e.split("."),a=i.gr;for(let e of t)a=a[e];return a||e}},children:t})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},9311:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var s=a(7042),r=a(4769);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[952,157,249,373,971,864,744],function(){return e(e.s=586)}),_N_E=e.O()}]);