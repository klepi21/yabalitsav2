"use strict";exports.id=526,exports.ids=[526],exports.modules={11526:(e,t,s)=>{s.d(t,{m:()=>y});var a=s(60080),r=s(79862),i=s(91672),c=s(15441),n=s(56388),l=s(66386),o=s(38011),d=s(68384),m=s(97052),h=s(24796),p=s(43334),x=s(9885),u=s(87502),v=s(57114),g=s(12932),j=s(81149),f=s(23161);let b=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy text: ",e),!1}};function y({match:e}){let{t}=(0,g.useLanguage)(),[s,y]=(0,x.useState)(!1),[_,w]=(0,x.useState)(!1),[N,C]=(0,x.useState)(!1),k=(0,p.createClientComponentClient)(),{toast:E}=(0,u.pm)(),S=(0,v.useRouter)(),[Z,P]=(0,x.useState)(!1),$=new Date(e.match_date),z=(0,j.x)($,"EEEE d MMM"),M=(0,r.ZP)($,"HH:mm"),F=e.participants?.length||0;(0,x.useEffect)(()=>{let t=async()=>{let{data:{user:t}}=await k.auth.getUser();t&&(w(e.host_id===t.id),y(e.participants?.some(e=>e.player.id===t.id)||!1))};t()},[e.host_id,e.participants]);let U=async t=>{try{t.stopPropagation(),C(!0);let{data:{user:s}}=await k.auth.getUser();if(!s)return;if(e.is_private){S.push(`/match/${e.id}`);return}let{error:a}=await k.from("match_participants").insert({match_id:e.id,player_id:s.id});if(a)throw a;y(!0),E({title:"Success",description:"You've joined the match!"})}catch(e){console.error("Error joining match:",e),E({title:"Error",description:"Failed to join match",variant:"destructive"})}finally{C(!1)}};return(0,a.jsxs)(m.Zb,{className:"cursor-pointer transition-all hover:bg-accent/50 hover:scale-[1.02] border-2  shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:shadow-[0_0_15px_rgba(255,255,255,0.1)] hover:shadow-[0_0_20px_rgba(0,0,0,0.15)] dark:hover:shadow-[0_0_20px_rgba(255,255,255,0.15)] bg-card/50 backdrop-blur-sm",onClick:()=>S.push(`/match/${e.id}`),children:[(0,a.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between pb-2  bg-gradient-to-r from-primary/20 via-primary/10 to-transparent  border-b border-border/50",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:e.venue?.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(i.Z,{className:"h-3 w-3"}),t("matches.host")," ",(0,f.K)(e.host?.full_name)]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[e.is_private&&a.jsx(h.C,{variant:"secondary",children:t("matches.private")}),F>=e.max_players?a.jsx(h.C,{variant:"destructive",children:t("matches.full")}):a.jsx(h.C,{variant:"outline",children:t(`matches.status.${e.status}`)})]})]}),(0,a.jsxs)(m.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(c.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:z})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(c.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:M})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(o.R,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:["â‚¬",e.cost_per_player]})]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:t("matches.players")}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",(0,f.T)(e.max_players),")"]})]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[F," / ",e.max_players]})]}),a.jsx("div",{className:"relative h-2 bg-secondary rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute inset-y-0 left-0 bg-primary transition-all",style:{width:`${F/e.max_players*100}%`}})})]}),!_&&!s&&F<e.max_players&&"upcoming"===e.status&&a.jsx(d.z,{className:"w-full mt-2 bg-primary hover:bg-primary/90 text-white shadow-lg",variant:"default",disabled:N,onClick:U,children:t(e.is_private?"matches.details.joinPrivate":"matches.join")}),_&&e.is_private&&(0,a.jsxs)("div",{className:"mt-2 p-3 bg-muted rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:"Private Match Code"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.z,{size:"sm",variant:"outline",className:"h-7",onClick:async t=>{if(t.stopPropagation(),!e.private_code)return;let s=await b(e.private_code);s?E({title:"Copied!",description:"Match code copied to clipboard",duration:2e3}):E({title:"Error",description:"Failed to copy code",variant:"destructive"})},children:[a.jsx(n.Z,{className:"h-3 w-3 mr-1"}),"Copy"]}),(0,a.jsxs)(d.z,{size:"sm",variant:"outline",className:"h-7",onClick:t=>{t.stopPropagation(),e.private_code&&(navigator.share?navigator.share({title:"Join my football match!",text:`Join my match at ${e.venue?.name}! Use code: ${e.private_code}`,url:window.location.href}).catch(e=>{console.error("Error sharing:",e)}):E({title:"Sharing not supported",description:"Your browser doesn't support sharing",variant:"destructive"}))},children:[a.jsx(l.Z,{className:"h-3 w-3 mr-1"}),"Share"]})]})]}),a.jsx("p",{className:"text-base font-mono tracking-wider text-center bg-background rounded p-1",children:e.private_code})]})]})]})}}};