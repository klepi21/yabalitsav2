(()=>{var e={};e.id=733,e.ids=[733],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},63961:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>m,routeModule:()=>p,tree:()=>d});var a=s(73137),r=s(54647),i=s(4183),l=s.n(i),n=s(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o=a.AppPageRouteModule,d=["",{children:["match",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,51755)),"/Users/konstantinoslepidas/Desktop/football/app/match/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58022)),"/Users/konstantinoslepidas/Desktop/football/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/konstantinoslepidas/Desktop/football/app/match/[id]/page.tsx"],h="/match/[id]/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new o({definition:{kind:r.x.APP_PAGE,page:"/match/[id]/page",pathname:"/match/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66100:(e,t,s)=>{Promise.resolve().then(s.bind(s,2666))},2666:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(60080),r=s(9885),i=s(79862),l=s(43334),n=s(91672),c=s(15441),o=s(79898),d=s(87094),m=s(1886),h=s(14571),u=s(4678),p=s(19458),x=s(56388),f=s(66386),g=s(38011),j=s(97052),y=s(24796),v=s(68384),w=s(32293),N=s(87502),b=s(23764),_=s(7073),k=s(49424),C=s(57114),q=s(67932);function E({matchId:e,playerId:t,playerName:s,existingRating:i,onRated:n}){let[c,o]=(0,r.useState)(i||0),[d,m]=(0,r.useState)(0),[h,u]=(0,r.useState)(!1),p=(0,l.createClientComponentClient)(),{toast:x}=(0,N.pm)(),f=async()=>{try{u(!0);let{data:{user:s}}=await p.auth.getUser();if(!s)return;let{error:a}=await p.from("match_ratings").upsert({match_id:e,rated_player_id:t,rater_id:s.id,rating:c});if(a)throw a;x({title:"Success",description:"Rating submitted successfully"}),n?.()}catch(e){console.error("Error submitting rating:",e),x({title:"Error",description:"Failed to submit rating",variant:"destructive"})}finally{u(!1)}};return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:s}),a.jsx("div",{className:"flex gap-1 mt-1",children:[1,2,3,4,5].map(e=>a.jsx("button",{className:"focus:outline-none",onMouseEnter:()=>m(e),onMouseLeave:()=>m(0),onClick:()=>o(e),children:a.jsx(q.Z,{className:`h-6 w-6 ${e<=(d||c)?"fill-primary text-primary":"text-muted-foreground"}`})},e))})]}),a.jsx(v.z,{size:"sm",disabled:!c||h,onClick:f,children:h?"Submitting...":"Submit"})]})}var S=s(2091);function z({className:e=""}){return a.jsx("div",{className:`relative w-full h-48 bg-gradient-to-b from-primary/20 to-background overflow-hidden ${e}`,children:(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full opacity-[0.15]",viewBox:"0 0 800 400",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"20",y:"20",width:"760",height:"360",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("circle",{cx:"400",cy:"200",r:"70",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("line",{x1:"400",y1:"20",x2:"400",y2:"380",stroke:"currentColor",strokeWidth:"2"}),a.jsx("rect",{x:"20",y:"120",width:"100",height:"160",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("rect",{x:"20",y:"160",width:"50",height:"80",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("circle",{cx:"120",cy:"200",r:"2",fill:"currentColor"}),a.jsx("rect",{x:"680",y:"120",width:"100",height:"160",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("rect",{x:"730",y:"160",width:"50",height:"80",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("circle",{cx:"680",cy:"200",r:"2",fill:"currentColor"}),a.jsx("path",{d:"M20,40 A20,20 0 0,1 40,20",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("path",{d:"M760,40 A20,20 0 0,0 780,20",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("path",{d:"M20,360 A20,20 0 0,0 40,380",stroke:"currentColor",fill:"none",strokeWidth:"2"}),a.jsx("path",{d:"M760,360 A20,20 0 0,1 780,380",stroke:"currentColor",fill:"none",strokeWidth:"2"})]})})}var P=s(12932),Z=s(15802);let M=(e,t)=>(0,i.ZP)(e,t,{locale:Z.el});var R=s(28089);function F({matchId:e,isParticipant:t}){let[s,n]=(0,r.useState)([]),[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),u=(0,l.createClientComponentClient)(),p=()=>{h.current?.scrollIntoView({behavior:"smooth"})},x=async()=>{let{data:t,error:s}=await u.from("match_chat").select(`
        id,
        message,
        created_at,
        sender:profiles!match_chat_sender_id_fkey (
          full_name,
          avatar_url
        )
      `).eq("match_id",e).order("created_at",{ascending:!0});if(s){console.error("Error fetching messages:",s);return}t&&(console.log("Messages loaded:",t),n(t))};(0,r.useEffect)(()=>{p()},[s]),(0,r.useEffect)(()=>{if(!t)return;let s=async()=>{await u.removeAllChannels();let t=u.channel(`match_chat:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"match_chat",filter:`match_id=eq.${e}`},async e=>{console.log("Received real-time update:",e),await x()}).subscribe(e=>{console.log("Chat channel status:",e)});return await x(),()=>{console.log("Cleaning up subscription"),t.unsubscribe()}};s()},[e,t]);let f=async t=>{if(t.preventDefault(),c.trim()&&!d){m(!0);try{let{data:t}=await u.auth.getUser(),{error:s}=await u.from("match_chat").insert({match_id:e,message:c.trim(),sender_id:t.user?.id});if(s)throw s;console.log("Message sent successfully"),o(""),await x()}catch(e){console.error("Error sending message:",e)}finally{m(!1)}}};return t?(0,a.jsxs)("div",{className:"flex flex-col h-[600px] bg-background",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"font-semibold",children:"Match Chat"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsxs)(w.qE,{className:"h-8 w-8",children:[a.jsx(w.F$,{src:e.sender.avatar_url}),a.jsx(w.Q5,{children:e.sender.full_name[0]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsxs)("span",{className:"font-medium text-sm",children:[e.sender.full_name.split(" ")[0]," ",e.sender.full_name.split(" ")[1]?.[0],"."]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:(0,i.ZP)(new Date(e.created_at),"HH:mm")})]}),a.jsx("p",{className:"text-sm",children:e.message})]})]},e.id)),a.jsx("div",{ref:h})]}),a.jsx("form",{onSubmit:f,className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(k.I,{value:c,onChange:e=>o(e.target.value),placeholder:"Type a message...",disabled:d}),a.jsx(v.z,{type:"submit",size:"icon",disabled:d,children:a.jsx(R.Z,{className:"h-4 w-4"})})]})})]}):null}var $=s(7589),A=s(56206),W=s(23161);let D=$.fC,I=$.xz,U=$.h_;$.x8;let Y=r.forwardRef(({className:e,...t},s)=>a.jsx($.aV,{ref:s,className:(0,W.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Y.displayName=$.aV.displayName;let T=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(U,{children:[a.jsx(Y,{}),(0,a.jsxs)($.VY,{ref:r,className:(0,W.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,a.jsxs)($.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(A.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));T.displayName=$.VY.displayName;let H=r.forwardRef(({className:e,...t},s)=>a.jsx($.Dx,{ref:s,className:(0,W.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));H.displayName=$.Dx.displayName;let V=r.forwardRef(({className:e,...t},s)=>a.jsx($.dk,{ref:s,className:(0,W.cn)("text-sm text-muted-foreground",e),...t}));function G({params:e}){let[t,s]=(0,r.useState)(null),[q,Z]=(0,r.useState)(!0),[R,$]=(0,r.useState)(!1),[A,W]=(0,r.useState)(!1),[U,Y]=(0,r.useState)(""),[H,V]=(0,r.useState)(!1),[G,L]=(0,r.useState)(!1),O=(0,l.createClientComponentClient)(),{toast:B}=(0,N.pm)(),J=(0,C.useRouter)(),[Q,X]=(0,r.useState)(null),[K,ee]=(0,r.useState)({}),{t:et}=(0,P.useLanguage)(),[es,ea]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await O.auth.getUser();X(e)};e()},[]);let er=async()=>{try{let{data:t,error:a}=await O.from("matches").select(`
          *,
          venue:venues(*),
          host:profiles!matches_host_id_fkey(*),
          participants:match_participants(
            player:profiles(*)
          ),
          match_ratings(*)
        `).eq("id",e.id).single();if(a)throw a;if(s(t),Q){W(t.host_id===Q.id),$(t.participants.some(e=>e.player.id===Q.id));let e=t.participants.map(e=>e.player.id),{data:s}=await O.from("match_ratings").select("rating, rated_player_id").in("rated_player_id",e),a={};s?.forEach(e=>{a[e.rated_player_id]||(a[e.rated_player_id]=[]),a[e.rated_player_id].push(e.rating)});let r={};Object.entries(a).forEach(([e,t])=>{let s=t.reduce((e,t)=>e+t,0)/t.length;r[e]=Number(s.toFixed(1))}),ee(r)}}catch(e){console.error("Error fetching match:",e)}finally{Z(!1)}};(0,r.useEffect)(()=>{er()},[e.id,Q]);let ei=async()=>{try{let{data:{user:a}}=await O.auth.getUser();if(!a)return;let r=new Date(t.match_date),i=(0,b.Z)(r,-8),l=new Date;if(!(0,_.Z)(l,i)){B({title:"Cannot Cancel",description:"Cancellations are only allowed up to 8 hours before the match",variant:"destructive"});return}let{error:n}=await O.from("match_participants").delete().match({match_id:t.id,player_id:a.id});if(n)throw n;$(!1),B({title:"Success",description:"You've cancelled your participation"});let{data:c,error:o}=await O.from("matches").select(`
          *,
          venue:venues(*),
          host:profiles!matches_host_id_fkey(*),
          participants:match_participants(
            player:profiles(
              id,
              full_name,
              phone_number,
              phone_public,
              avatar_url
            )
          )
        `).eq("id",e.id).single();if(o)throw o;s(c)}catch(e){console.error("Error cancelling participation:",e),B({title:"Error",description:"Failed to cancel participation",variant:"destructive"})}},el=async()=>{try{if(t.private_code!==U){B({title:"Invalid Code",description:"The code you entered is incorrect",variant:"destructive"});return}let{data:{user:e}}=await O.auth.getUser();if(!e)return;let{error:s}=await O.from("match_participants").insert({match_id:t.id,player_id:e.id});if(s)throw s;$(!0),V(!1),B({title:"Success",description:"You've joined the match!"})}catch(e){console.error("Error joining match:",e),B({title:"Error",description:"Failed to join match",variant:"destructive"})}},en=async()=>{try{let e=window.confirm("Are you sure you want to delete this match? This action cannot be undone.");if(!e)return;let{error:s}=await O.from("match_participants").delete().eq("match_id",t.id);if(s)throw s;let{error:a}=await O.from("matches").delete().eq("id",t.id);if(a)throw a;B({title:"Success",description:"Match has been deleted"}),J.push("/")}catch(e){console.error("Error deleting match:",e),B({title:"Error",description:"Failed to delete match",variant:"destructive"})}},ec=async()=>{try{let e=window.confirm("Are you sure you want to mark this match as finished?");if(!e)return;let{error:s}=await O.from("matches").update({status:"finished"}).eq("id",t.id);if(s)throw s;B({title:"Success",description:"Match has been marked as finished"}),await er()}catch(e){console.error("Error finishing match:",e),B({title:"Error",description:"Failed to finish match",variant:"destructive"})}},eo=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy text: ",e),!1}},ed=async()=>{try{let{data:{user:e}}=await O.auth.getUser();if(!e)return;let{error:s}=await O.from("match_participants").insert({match_id:t.id,player_id:e.id});if(s)throw s;B({title:"Success",description:"You've joined the match!"}),er()}catch(e){console.error("Error joining match:",e),B({title:"Error",description:"Failed to join match",variant:"destructive"})}},em=async()=>{await O.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/match/${e.id}`,skipBrowserRedirect:!1}})};if(q&&null!==Q)return a.jsx("div",{className:"p-4",children:"Loading..."});if(!t)return a.jsx("div",{className:"p-4",children:"Match not found"});let eh=new Date(t.match_date),eu=M(eh,"EEEE d MMM"),ep=(0,i.ZP)(eh,"HH:mm"),ex=t.participants?.length||0,ef=(0,b.Z)(eh,-8),eg=(0,_.Z)(new Date,ef),ej=e=>{let[t,...s]=e.split(" ");return`${t} ${s[0]?.[0]}.`};return a.jsx("div",{className:"p-4 space-y-6 relative",children:(0,a.jsxs)(j.Zb,{className:"border-none shadow-none relative",children:[a.jsx(z,{className:"rounded-t-lg"}),!Q&&a.jsx("div",{className:"absolute inset-0 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-4 bg-background/30",children:(0,a.jsxs)("div",{className:"text-center space-y-4 p-6 rounded-lg bg-background/95 backdrop-blur shadow-lg max-w-md mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Καλώς ήρθατε στο Yabalitsa!"}),a.jsx("p",{className:"text-muted-foreground",children:"Συνδεθείτε για να δείτε όλες τις λεπτομέρειες του αγώνα και να συμμετέχετε."}),a.jsx(v.z,{size:"lg",className:"w-full",onClick:em,children:"Σύνδεση με Google"})]})}),(0,a.jsxs)(j.Ol,{className:"flex flex-row items-center justify-between pb-2 px-4 -mt-8 relative z-10",children:[(0,a.jsxs)("div",{className:"bg-background p-4 rounded-lg shadow-lg",children:[a.jsx("h1",{className:"text-2xl font-bold",children:t.venue.name}),(0,a.jsxs)("p",{className:"text-muted-foreground flex items-center gap-2",children:[a.jsx(n.Z,{className:"h-4 w-4"}),et("matches.host")," ",ej(t.host.full_name)]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2 bg-background p-4 rounded-lg shadow-lg",children:[t.is_private&&a.jsx(y.C,{variant:"secondary",children:et("matches.private")}),a.jsx(y.C,{variant:"outline",children:et(`matches.status.${t.status}`)})]})]}),(0,a.jsxs)(j.aY,{className:"space-y-8 px-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:et("matches.date")}),(0,a.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-4 w-4"}),eu]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:et("matches.time")}),(0,a.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-4 w-4"}),ep]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:et("matches.details.costPerPlayer")}),(0,a.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[a.jsx(g.R,{className:"h-4 w-4"}),"€",t.cost_per_player]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:et("matches.players")}),(0,a.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[a.jsx(n.Z,{className:"h-4 w-4"}),ex," / ",t.max_players]})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"* Κάθε παίκτης πρέπει να πληρώσει το κόστος συμμετοχής του στη γραμματεία του γηπέδου πριν ή μετά τον αγώνα"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:et("matches.details.location")}),a.jsx(v.z,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary",onClick:()=>window.open(`https://maps.google.com/?q=${t.venue.address}`,"_blank"),children:a.jsx(o.Z,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-4 rounded-lg border",children:(0,a.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[a.jsx(d.Z,{className:"h-4 w-4"}),t.venue.address]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:et("matches.players")}),"finished"!==t.status&&(R||A)&&(0,a.jsxs)(D,{children:[a.jsx(I,{asChild:!0,children:(0,a.jsxs)(v.z,{variant:"outline",className:"gap-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),"Match Chat"]})}),a.jsx(T,{className:"sm:max-w-[500px] p-0",children:a.jsx(F,{matchId:t.id,isParticipant:R||A})})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[t.participants.slice(0,es?void 0:5).map(e=>{let s=e.player.speed&&e.player.pace&&e.player.power?((e.player.speed+e.player.pace+e.player.power)/3).toFixed(1):null,r=K[e.player.id];return a.jsx("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(w.qE,{className:"h-10 w-10",children:[a.jsx(w.F$,{src:e.player.avatar_url}),a.jsx(w.Q5,{children:e.player.full_name[0]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:ej(e.player.full_name)}),e.player.id===t.host_id&&a.jsx(y.C,{variant:"outline",children:"Host"})]}),(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[s&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Self:"}),a.jsx(y.C,{variant:"secondary",className:"text-xs",children:s})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Community:"}),a.jsx(S.Z,{rating:r,size:"sm",showValue:!1})]})]}),(A||R)&&e.player.phone_public&&e.player.phone_number&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(h.Z,{className:"h-3 w-3"}),e.player.phone_number]})]})]})},e.player.id)}),t.participants.length>5&&a.jsx(v.z,{variant:"outline",onClick:()=>ea(!es),className:"w-full",children:es?(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Show All Players (",t.participants.length,")"]})})]})]}),!A&&"finished"!==t.status&&(0,a.jsxs)(a.Fragment,{children:[!R&&ex<t.max_players&&a.jsx(a.Fragment,{children:t.is_private&&!H?a.jsx(v.z,{className:"w-full",onClick:()=>V(!0),children:et("matches.details.joinPrivate")}):t.is_private&&H?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(k.I,{type:"text",placeholder:et("matches.details.enterCode"),maxLength:6,value:U,onChange:e=>Y(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(v.z,{className:"flex-1",onClick:el,children:et("matches.details.submitCode")}),a.jsx(v.z,{variant:"outline",onClick:()=>{V(!1),Y("")},children:"Cancel"})]})]}):a.jsx(v.z,{className:"w-full",onClick:ed,children:"Συμμετοχή"})}),R&&a.jsx(v.z,{variant:"destructive",className:"w-full",onClick:ei,disabled:!eg,children:et(eg?"matches.details.cancelParticipation":"matches.details.cannotCancel")})]}),A&&"finished"!==t.status&&ex/t.max_players<.9&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[a.jsx(v.z,{variant:"destructive",className:"w-full",onClick:en,children:et("matches.details.deleteMatch")}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:et("matches.details.deleteWarning")})]}),A&&"upcoming"===t.status&&a.jsx(v.z,{className:"w-full mt-4",onClick:ec,children:et("matches.details.markAsFinished")}),"finished"===t.status&&Q&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Rate Players"}),a.jsx(v.z,{variant:"outline",onClick:()=>L(!G),children:G?"Hide Ratings":"Show Ratings"})]}),G&&a.jsx("div",{className:"space-y-3",children:t.participants.filter(e=>e.player.id!==Q.id).map(e=>{let s=t.match_ratings?.find(t=>t.rater_id===Q.id&&t.rated_player_id===e.player.id)?.rating;return a.jsx(E,{matchId:t.id,playerId:e.player.id,playerName:e.player.full_name,existingRating:s,onRated:er},e.player.id)})})]}),A&&t.is_private&&"finished"!==t.status&&(0,a.jsxs)("div",{className:"mt-2 p-4 bg-muted rounded-lg space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:et("matches.details.privateCode")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(v.z,{size:"sm",variant:"outline",className:"h-8",onClick:async()=>{let e=await eo(t.private_code);e&&B({title:"Copied!",description:"Match code copied to clipboard"})},children:[a.jsx(x.Z,{className:"h-4 w-4 mr-1"}),et("matches.details.copyCode")]}),(0,a.jsxs)(v.z,{size:"sm",variant:"outline",className:"h-8",onClick:()=>{navigator.share?navigator.share({title:"Join my football match!",text:`Join my match at ${t.venue.name}! Use code: ${t.private_code}`,url:window.location.href}).catch(e=>{console.error("Error sharing:",e)}):B({title:"Sharing not supported",description:"Your browser doesn't support sharing",variant:"destructive"})},children:[a.jsx(f.Z,{className:"h-4 w-4 mr-1"}),et("matches.details.share")]})]})]}),a.jsx("p",{className:"text-lg font-mono tracking-wider text-center bg-background rounded p-2",children:t.private_code})]})]})]})})}V.displayName=$.dk.displayName},49424:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var a=s(60080),r=s(9885),i=s(23161);let l=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));l.displayName="Input"},51755:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var a=s(17536);let r=(0,a.createProxy)(String.raw`/Users/konstantinoslepidas/Desktop/football/app/match/[id]/page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,c=n}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[650,125,862,129,393,285,110,617,52,293,477,91],()=>s(63961));module.exports=a})();