(()=>{var e={};e.id=178,e.ids=[178],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},38058:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>u,routeModule:()=>m,tree:()=>c});var r=t(73137),a=t(54647),i=t(4183),n=t.n(i),l=t(71775),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=r.AppPageRouteModule,c=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70503)),"/Users/konstantinoslepidas/Desktop/football/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58022)),"/Users/konstantinoslepidas/Desktop/football/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/konstantinoslepidas/Desktop/football/app/profile/page.tsx"],p="/profile/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new d({definition:{kind:a.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4286:(e,s,t)=>{Promise.resolve().then(t.bind(t,47095))},47095:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(60080),a=t(9885),i=t(43334),n=t(1438),l=t(67932),o=t(91672),d=t(32293),c=t(68384),u=t(97052);function p({user:e,stats:s,onEdit:t}){return(0,r.jsxs)(u.Zb,{className:"w-full overflow-hidden",children:[r.jsx("div",{className:"h-32 bg-gradient-to-r from-primary/20 via-primary/10 to-primary/5",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(to right, transparent 49%, rgba(255,255,255,0.1) 50%, transparent 51%),
            linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px)
          `,backgroundSize:"40px 40px",opacity:.3}})}),(0,r.jsxs)(u.aY,{className:"relative px-6 pb-6",children:[(0,r.jsxs)("div",{className:"absolute -top-16 left-6 flex items-end gap-4",children:[(0,r.jsxs)(d.qE,{className:"h-32 w-32 border-4 border-background",children:[r.jsx(d.F$,{src:e?.avatar_url}),r.jsx(d.Q5,{className:"text-4xl",children:e?.full_name?.[0]})]}),(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("h2",{className:"text-2xl font-bold",children:e?.full_name}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Μέλος από ",new Date(e?.created_at).toLocaleDateString("el")]})]})]}),r.jsx("div",{className:"flex justify-end mb-16",children:r.jsx(c.z,{variant:"outline",onClick:t,children:"Επεξεργασία προφίλ"})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center p-4 bg-muted/50 rounded-lg",children:[r.jsx(n.Z,{className:"h-5 w-5 mb-2 text-primary"}),r.jsx("span",{className:"text-2xl font-bold",children:s.gamesPlayed}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Συμμετοχές"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4 bg-muted/50 rounded-lg",children:[r.jsx(l.Z,{className:"h-5 w-5 mb-2 text-primary"}),r.jsx("span",{className:"text-2xl font-bold",children:s.selfRating.toFixed(1)}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Αυτοαξιολόγηση"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4 bg-muted/50 rounded-lg",children:[r.jsx(o.Z,{className:"h-5 w-5 mb-2 text-primary"}),r.jsx("span",{className:"text-2xl font-bold",children:s.communityRating.toFixed(1)}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Κοινότητα"})]})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{className:"text-muted-foreground",children:"Email"}),r.jsx("span",{children:e?.email})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{className:"text-muted-foreground",children:"Τηλέφωνο"}),r.jsx("span",{children:e?.phone_number||"-"})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{className:"text-muted-foreground",children:"Θέση"}),r.jsx("span",{children:e?.position||"-"})]})]})]})]})}var x=t(49424),m=t(33478),f=t(70589);function h({user:e,onSave:s,onCancel:t}){return r.jsx(u.Zb,{children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.target),r=Object.fromEntries(t);s(r)},children:[(0,r.jsxs)(u.aY,{className:"space-y-6 pt-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"full_name",children:"Ονοματεπώνυμο"}),r.jsx(x.I,{id:"full_name",name:"full_name",defaultValue:e?.full_name,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"phone_number",children:"Τηλέφωνο"}),r.jsx(x.I,{id:"phone_number",name:"phone_number",defaultValue:e?.phone_number,type:"tel"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"position",children:"Θέση"}),(0,r.jsxs)(f.Ph,{name:"position",defaultValue:e?.position||"",children:[r.jsx(f.i4,{children:r.jsx(f.ki,{placeholder:"Επιλέξτε θέση"})}),(0,r.jsxs)(f.Bw,{children:[r.jsx(f.Ql,{value:"goalkeeper",children:"Τερματοφύλακας"}),r.jsx(f.Ql,{value:"defender",children:"Αμυντικός"}),r.jsx(f.Ql,{value:"midfielder",children:"Μέσος"}),r.jsx(f.Ql,{value:"forward",children:"Επιθετικός"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(m._,{htmlFor:"self_rating",children:"Αυτοαξιολόγηση (1-10)"}),r.jsx(x.I,{id:"self_rating",name:"self_rating",type:"number",min:"1",max:"10",step:"0.5",defaultValue:e?.self_rating||"5"})]})]}),(0,r.jsxs)(u.eW,{className:"flex justify-end gap-2",children:[r.jsx(c.z,{variant:"outline",type:"button",onClick:t,children:"Ακύρωση"}),r.jsx(c.z,{type:"submit",children:"Αποθήκευση"})]})]})})}var j=t(29330),g=t(87502);function b(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)({gamesPlayed:0,selfRating:5,communityRating:0}),u=(0,i.createClientComponentClient)(),{toast:x}=(0,g.pm)();(0,a.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await u.auth.getUser();if(!e)return;let{data:t}=await u.from("profiles").select("*").eq("id",e.id).single(),{count:r}=await u.from("match_participants").select("*",{count:"exact"}).eq("player_id",e.id);s(t),c({gamesPlayed:r||0,selfRating:t?.self_rating||5,communityRating:0})}catch(e){console.error("Error fetching profile:",e)}finally{n(!1)}};e()},[]);let m=async t=>{if(e)try{let r={full_name:t.full_name,phone_number:t.phone_number,position:t.position,self_rating:parseFloat(t.self_rating)},{error:a}=await u.from("profiles").update(r).eq("id",e.id);if(a)throw a;s(e=>e?{...e,...r}:null),c(e=>({...e,selfRating:parseFloat(t.self_rating)})),o(!1),x({title:"Επιτυχής ενημέρωση",description:"Το προφίλ σας ενημερώθηκε με επιτυχία"})}catch(e){console.error("Error updating profile:",e),x({title:"Σφάλμα",description:"Υπήρξε πρόβλημα κατά την ενημέρωση του προφίλ",variant:"destructive"})}};return t?r.jsx("div",{className:"p-4",children:"Loading..."}):r.jsx(j.t,{children:r.jsx("div",{className:"container max-w-4xl py-6",children:l?r.jsx(h,{user:e,onSave:m,onCancel:()=>o(!1)}):r.jsx(p,{user:e,stats:d,onEdit:()=>o(!0)})})})}},70503:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=t(17536);let a=(0,r.createProxy)(String.raw`/Users/konstantinoslepidas/Desktop/football/app/profile/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[650,125,996,648,536,920,617,52,293,154,330],()=>t(38058));module.exports=r})();