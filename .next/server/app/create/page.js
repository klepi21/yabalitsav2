(()=>{var e={};e.id=572,e.ids=[572],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},74065:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>c});var r=a(73137),s=a(54647),i=a(4183),n=a.n(i),o=a(71775),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d=r.AppPageRouteModule,c=["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,24350)),"/Users/konstantinoslepidas/Desktop/football/app/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,58022)),"/Users/konstantinoslepidas/Desktop/football/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,51918,23)),"next/dist/client/components/not-found-error"]}],p=["/Users/konstantinoslepidas/Desktop/football/app/create/page.tsx"],u="/create/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new d({definition:{kind:s.x.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},92770:(e,t,a)=>{Promise.resolve().then(a.bind(a,14438))},14438:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var r=a(60080),s=a(9885),i=a(57114),n=a(66558),o=a(83894),l=a(19098),d=a(43334),c=a(46701),p=a(14291),u=a(19458),m=a(4678),x=a(1264),h=a(23161);let f=p.fC;p.ZA;let g=p.B4,y=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(p.xz,{ref:s,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(p.JO,{asChild:!0,children:r.jsx(u.Z,{className:"h-4 w-4 opacity-50"})})]}));y.displayName=p.xz.displayName;let j=s.forwardRef(({className:e,...t},a)=>r.jsx(p.u_,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(m.Z,{className:"h-4 w-4"})}));j.displayName=p.u_.displayName;let b=s.forwardRef(({className:e,...t},a)=>r.jsx(p.$G,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(u.Z,{className:"h-4 w-4"})}));b.displayName=p.$G.displayName;let v=s.forwardRef(({className:e,children:t,position:a="popper",...s},i)=>r.jsx(p.h_,{children:(0,r.jsxs)(p.VY,{ref:i,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(j,{}),r.jsx(p.l_,{className:(0,h.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(b,{})]})}));v.displayName=p.VY.displayName;let _=s.forwardRef(({className:e,...t},a)=>r.jsx(p.__,{ref:a,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));_.displayName=p.__.displayName;let w=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(p.ck,{ref:s,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(p.wU,{children:r.jsx(x.Z,{className:"h-4 w-4"})})}),r.jsx(p.eT,{children:t})]}));w.displayName=p.ck.displayName;let N=s.forwardRef(({className:e,...t},a)=>r.jsx(p.Z0,{ref:a,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));N.displayName=p.Z0.displayName;var C=a(49424),k=a(68384),q=a(51910),z=a(11922),P=a(28070);function R({className:e,classNames:t,showOutsideDays:a=!0,...s}){return r.jsx(P._W,{showOutsideDays:a,className:(0,h.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,h.cn)((0,k.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,h.cn)((0,k.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>r.jsx(q.Z,{className:"h-4 w-4"}),IconRight:({...e})=>r.jsx(z.Z,{className:"h-4 w-4"})},...s})}R.displayName="Calendar";var M=a(66698),Z=a(12820);let S=Z.fC,$=Z.xz,I=s.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},i)=>r.jsx(Z.h_,{children:r.jsx(Z.VY,{ref:i,align:t,sideOffset:a,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));I.displayName=Z.VY.displayName;var V=a(517),G=a(79862),O=a(7073),J=a(74074),W=a(87502),A=a(97052),D=a(68856);let E=s.forwardRef(({className:e,...t},a)=>r.jsx(D.fC,{ref:a,className:(0,h.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(D.z$,{className:(0,h.cn)("flex items-center justify-center text-current"),children:r.jsx(x.Z,{className:"h-4 w-4"})})}));function U(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 2a10 10 0 0 1 8.66 5"}),r.jsx("path",{d:"M12 2a10 10 0 0 0-8.66 5"}),r.jsx("path",{d:"M12 22V2"}),r.jsx("path",{d:"M12 22a10 10 0 0 0 8.66-5"}),r.jsx("path",{d:"M12 22a10 10 0 0 1-8.66-5"}),r.jsx("path",{d:"M2 12h20"})]})}E.displayName=D.fC.displayName;var X=a(12932);let Y=async e=>{try{let t=new Date(e.match_date),a=(0,G.ZP)(t,"dd/MM/yyyy"),r=(0,G.ZP)(t,"HH:mm");await fetch("https://onesignal.com/api/v1/notifications",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic os_v2_app_ykyfjt6btvexbgka7g3ay3i7w33dvmpis5tuvg4mfcuro5eamghod75fz6x5bmjwbeknzaso34daf5secmkyjgezkzloonovtqvnc3y"},body:JSON.stringify({app_id:"c2b054cf-c19d-4970-9940-f9b60c6d1fb6",included_segments:["Subscribed Users"],contents:{en:`New match at ${e.venue.name} on ${a} at ${r}`},headings:{en:"New Match Available!"},url:`${window.location.origin}/match/${e.id}`,web_buttons:[{id:"join-match",text:"View Match",url:`${window.location.origin}/match/${e.id}`}]})})}catch(e){console.error("Error sending notification:",e)}};function L(){let e=(0,i.useRouter)();(0,d.createClientComponentClient)();let{toast:t}=(0,W.pm)(),[a,p]=(0,s.useState)(!1),{t:u}=(0,X.useLanguage)(),m=l.Ry({venue_id:l.Z_({required_error:u("create.errors.venueRequired")}),match_date:l.hT({required_error:u("create.errors.dateRequired")}).refine(e=>!(0,O.Z)(e,(0,J.Z)()),u("create.errors.dateInPast")),match_time:l.Z_().refine(e=>{let[t,a]=e.split(":").map(Number);return t>=10&&t<=23&&(0===a||30===a)},u("create.errors.timeInvalid")),max_players:l.Rx().min(10,u("create.errors.playersRange")).max(16,u("create.errors.playersRange")),cost_per_player:l.Rx().min(0,u("create.errors.costNegative")),is_private:l.O7().default(!1),venue_confirmed:l.O7().refine(e=>!0===e,{message:u("create.errors.venueConfirmRequired")})}),x=(0,n.cI)({resolver:(0,o.F)(m),defaultValues:{max_players:10,cost_per_player:5,is_private:!1,venue_confirmed:!1}}),j=Array.from({length:27},(e,t)=>`${(Math.floor(t/2)+10).toString().padStart(2,"0")}:${t%2==0?"00":"30"}`),b=async a=>{try{p(!0);let r=(0,d.createClientComponentClient)(),{data:{user:s}}=await r.auth.getUser();if(!s){t({title:"Error",description:"You must be logged in to create a match",variant:"destructive"});return}let[i,n]=a.match_time.split(":").map(Number),o=new Date(a.match_date);o.setHours(i,n);let l=a.is_private?Math.random().toString(36).substring(2,8).toUpperCase():null,{data:c,error:u}=await r.from("matches").insert({venue_id:a.venue_id,host_id:s.id,match_date:o.toISOString(),max_players:a.max_players,cost_per_player:a.cost_per_player,is_private:a.is_private,private_code:l,status:"upcoming"}).select(`
          *,
          venue:venues(*)
        `).single();if(u)throw u;let{error:m}=await r.from("match_participants").insert({match_id:c.id,player_id:s.id});if(m)throw m;a.is_private||await Y(c),t({title:"Success",description:"Match created successfully!"}),e.push(`/match/${c.id}`)}catch(e){console.error("Error creating match:",e),t({title:"Error",description:"Failed to create match",variant:"destructive"})}finally{p(!1)}};return r.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:(0,r.jsxs)(A.Zb,{className:"border-2",children:[r.jsx(A.Ol,{className:"bg-gradient-to-r from-primary/10 to-transparent",children:(0,r.jsxs)(A.ll,{className:"text-2xl font-bold flex items-center gap-2",children:[r.jsx(U,{className:"h-6 w-6 text-primary"}),u("create.title")]})}),r.jsx(A.aY,{className:"p-6",children:r.jsx(c.l0,{...x,children:(0,r.jsxs)("form",{onSubmit:x.handleSubmit(b),className:"space-y-6",children:[r.jsx(c.Wi,{control:x.control,name:"venue_id",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:u("create.venue.label")}),(0,r.jsxs)(f,{onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx(c.NI,{children:r.jsx(y,{children:r.jsx(g,{placeholder:u("create.venue.placeholder")})})}),r.jsx(v,{children:r.jsx(w,{value:"d290f1ee-6c54-4b01-90e6-d701748f0851",children:"Leontes"})})]}),r.jsx(c.zG,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(c.Wi,{control:x.control,name:"match_date",render:({field:e})=>(0,r.jsxs)(c.xJ,{className:"flex flex-col",children:[r.jsx(c.lX,{children:u("create.date.label")}),(0,r.jsxs)(S,{children:[r.jsx($,{asChild:!0,children:r.jsx(c.NI,{children:(0,r.jsxs)(k.z,{variant:"outline",className:(0,h.cn)("pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,G.ZP)(e.value,"PPP"):r.jsx("span",{children:u("create.date.placeholder")}),r.jsx(V.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(I,{className:"w-auto p-0",align:"start",children:r.jsx(R,{mode:"single",selected:e.value,onSelect:e.onChange,disabled:e=>e<new Date,initialFocus:!0})})]}),r.jsx(c.zG,{})]})}),r.jsx(c.Wi,{control:x.control,name:"match_time",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:u("create.time.label")}),(0,r.jsxs)(f,{onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx(c.NI,{children:r.jsx(y,{children:r.jsx(g,{placeholder:u("create.time.placeholder")})})}),r.jsx(v,{children:j.map(e=>r.jsx(w,{value:e,children:e},e))})]}),r.jsx(c.zG,{})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(c.Wi,{control:x.control,name:"max_players",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:u("create.players.label")}),(0,r.jsxs)(f,{onValueChange:t=>e.onChange(Number(t)),defaultValue:e.value.toString(),children:[r.jsx(c.NI,{children:r.jsx(y,{children:r.jsx(g,{placeholder:u("create.players.label")})})}),r.jsx(v,{children:[10,12,14,16].map(e=>(0,r.jsxs)(w,{value:e.toString(),children:[e," ",u("create.players.suffix")]},e))})]}),r.jsx(c.zG,{})]})}),r.jsx(c.Wi,{control:x.control,name:"cost_per_player",render:({field:e})=>(0,r.jsxs)(c.xJ,{children:[r.jsx(c.lX,{children:u("create.cost.label")}),r.jsx(c.NI,{children:r.jsx(C.I,{type:"number",min:"0",step:"0.5",placeholder:u("create.cost.placeholder"),...e,onChange:t=>e.onChange(Number(t.target.value))})}),r.jsx(c.zG,{})]})})]}),r.jsx(c.Wi,{control:x.control,name:"is_private",render:({field:e})=>(0,r.jsxs)(c.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[r.jsx(c.lX,{className:"text-base",children:u("create.privateMatch.label")}),r.jsx(c.pf,{children:u("create.privateMatch.description")})]}),r.jsx(c.NI,{children:r.jsx(M.r,{checked:e.value,onCheckedChange:e.onChange})})]})}),r.jsx(c.Wi,{control:x.control,name:"venue_confirmed",render:({field:e})=>(0,r.jsxs)(c.xJ,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[r.jsx(c.NI,{children:r.jsx(E,{checked:e.value,onCheckedChange:e.onChange})}),(0,r.jsxs)("div",{className:"space-y-1 leading-none",children:[r.jsx(c.lX,{className:"text-sm font-medium leading-none",children:u("create.venueConfirmation.label")}),r.jsx(c.pf,{className:"text-sm text-muted-foreground",children:u("create.venueConfirmation.description")}),r.jsx(c.zG,{})]})]})}),r.jsx(k.z,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-white shadow-lg transition-all",disabled:a||!x.watch("venue_confirmed"),children:a?u("create.submit.creating"):u("create.submit.create")})]})})})]})})}},24350:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=a(17536);let s=(0,r.createProxy)(String.raw`/Users/konstantinoslepidas/Desktop/football/app/create/page.tsx`),{__esModule:i,$$typeof:n}=s,o=s.default,l=o}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[650,125,862,418,285,301,617,52,976],()=>a(74065));module.exports=r})();